{"version":3,"sources":["standard/widgets/LinkCards.js","standard/widgets/ManageEmail.js","standard/widgets/OpenAttachment.js"],"names":["$","LinkCards","saveMethod","Cmdbuild","widgets","SAVEONCARD","save","form","widget","formName","this","formObject","dataModel","forms","output","key","checked","name","_id","cleanData","cleanForm","jQuery","ManageEmail","ROWBUTTONREGENERATE","ROWBUTTONREPLY","ROWBUTTONDELETE","ROWBUTTONMODIFY","mailAttributes","template2MailTable","account","bccAddresses","content","toAddresses","ccAddresses","fromAddress","subject","SAVEAFTER","data","getBackendData","mails","bkData","bkMails","prepareFields","i","templates","length","template2Mail","evaluateCql","template","attributes","getAttributes","compileAttributes","CqlManager","variablesTable","generate","commandsTable","createField","widgetId","templateNumber","push","filter","text","params","variables","setSynchronization","keepSynchronization","promptSynchronization","compileAttribute","initialize","backendData","status","cqlResolve","loadMails","config","getBackend","refreshCqlField","initializationPhase","busy","id","pushSingleParameterOnStack","standard","commands","navigate","command","dialog","e","console","log","me","TM","setTimeout","param","backend","callback","callbackScope","cardId","utilities","proxy","getProcessMails","className","response","callbackLoadMails","apply","processType","processInstanceId","mail","splice","getProcessSingleMail","clone","ret","cqlResolveSingleField","nameField","resolve","getMail","fromTemplate","slice","cqlResolveCallback","attribute","refreshTemplate","templateName","isDifferent","bkMail","copyMail","mailOut","deleteMails","found","j","deleteProcessMail","type","flush","parentForm","Error","stack","arrMails","flushRecursive","present","grep","el","putProcessMail","postProcessMail","OpenAttachment","getAttachmentsForWidget","formname","widgetid","parentform","attachments","attachment","setAttachmentsForWidget","postInstanceAttachment","formdata"],"mappings":"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","file":"widgets.min.js"}